(this["webpackJsonpdiscord-clone"]=this["webpackJsonpdiscord-clone"]||[]).push([[0],{69:function(e,c,s){},70:function(e,c,s){"use strict";s.r(c);var a=s(2),n=s.n(a),t=s(23),i=s.n(t),r=s(35),l=s(42),o=s.n(l),j=s(55),d=s.n(j),h=s(14),b=s(26),u=Object(b.b)({name:"app",initialState:{channelId:null,channelName:null},reducers:{setChannelInfo:function(e,c){e.channelId=c.payload.channelId,e.channelName=c.payload.channelName}}}),m=u.actions.setChannelInfo,O=function(e){return e.app.channelId},p=function(e){return e.app.channelName},x=u.reducer,_=s(3),f=function(e){var c=e.id,s=e.channelName,a=Object(h.b)();return Object(_.jsx)("div",{onClick:function(){return a(m({channelId:c,channelName:s}))},className:"sidebarChannel",children:Object(_.jsxs)("h4",{children:[Object(_.jsx)("span",{className:"sidebarChannel__hash",children:"#"}),s]})})},g=s(85),v=s(86),N=s(87),S=s(88),I=s(89),C=s(90),w=s(102),y=Object(b.b)({name:"user",initialState:{user:null},reducers:{login:function(e,c){e.user=c.payload},logout:function(e){e.user=null}}}),k=y.actions,z=k.login,A=k.logout,B=function(e){return e.user.user},E=y.reducer,H=s(28),D=H.a.initializeApp({apiKey:"AIzaSyAKpwgc67ePNVC8IqaiGvSAonsB5xYII3I",authDomain:"discord-clone-72cf6.firebaseapp.com",projectId:"discord-clone-72cf6",storageBucket:"discord-clone-72cf6.appspot.com",messagingSenderId:"895733720231",appId:"1:895733720231:web:ce372aca78630dfa596782",measurementId:"G-BRS8JSFNQ8"}).firestore(),F=H.a.auth(),G=new H.a.auth.GoogleAuthProvider,J=D,P=function(){var e=Object(h.c)(B),c=Object(a.useState)([]),s=Object(r.a)(c,2),n=s[0],t=s[1];Object(a.useEffect)((function(){J.collection("channels").onSnapshot((function(e){t(e.docs.map((function(e){return{id:e.id,channel:e.data()}})))}))}),[]);return Object(_.jsxs)("div",{className:"sidebar",children:[Object(_.jsxs)("div",{className:"sidebar__top",children:[Object(_.jsx)("h3",{children:"Clever programmer "}),Object(_.jsx)(o.a,{})]}),Object(_.jsxs)("div",{className:"sidebar__channels",children:[Object(_.jsxs)("div",{className:"sidebar__channelHeader",children:[Object(_.jsxs)("div",{className:"sidebar__header",children:[Object(_.jsx)(o.a,{}),Object(_.jsx)("h4",{children:"text channel"})]}),Object(_.jsx)(d.a,{onClick:function(){var e=prompt("Enter a new channel name :");e&&J.collection("channels").add({channelName:e})},className:"sidebar__addChannel"})]}),Object(_.jsx)("div",{className:"sidebar__channelsList",children:n.map((function(e){var c=e.id,s=e.channel;return Object(_.jsx)(f,{id:c,channelName:s.channelName},c)}))})]}),Object(_.jsxs)("div",{className:"sidebar__voice",children:[Object(_.jsx)(g.a,{className:"sidebar__voice__icon",fontSize:"large"}),Object(_.jsxs)("div",{className:"sidebar__voice__info",children:[Object(_.jsx)("h3",{children:"Voice connected"}),Object(_.jsx)("p",{children:"Stream"})]}),Object(_.jsxs)("div",{className:"sidebar__voice__icons",children:[Object(_.jsx)(v.a,{}),Object(_.jsx)(N.a,{})]})]}),Object(_.jsxs)("div",{className:"sidebar__profile",children:[Object(_.jsx)(w.a,{src:e.photo}),Object(_.jsxs)("div",{className:"sidebar__profile__info",children:[Object(_.jsx)("h3",{children:e.displayName}),Object(_.jsx)("p",{children:e.uid})]}),Object(_.jsxs)("div",{className:"sidebar__profile__icons",children:[Object(_.jsx)(S.a,{}),Object(_.jsx)(I.a,{}),Object(_.jsx)(C.a,{titleAccess:"logout",style:{cursor:"pointer"},onClick:function(){return F.signOut()}})]})]})]})},U=s(97),V=s(98),W=s(99),K=s(100),L=s(91),M=s(92),R=s(93),T=s(94),q=s(95),Q=s(96),Y=function(e){var c=e.channelName;return Object(_.jsxs)("div",{className:"chatHeader",children:[Object(_.jsx)("div",{className:"chatHeader__left",children:Object(_.jsxs)("h3",{children:[Object(_.jsx)("span",{className:"chatHeader__left__hash",children:"#"}),c]})}),Object(_.jsxs)("div",{className:"chatHeader__right",children:[Object(_.jsx)(L.a,{}),Object(_.jsx)(M.a,{}),Object(_.jsx)(R.a,{}),Object(_.jsxs)("div",{className:"chatHeader__right__search",children:[Object(_.jsx)("input",{placeholder:"search"}),Object(_.jsx)(T.a,{})]}),Object(_.jsx)(q.a,{}),Object(_.jsx)(Q.a,{})]})]})},$=function(e){var c=e.message,s=e.user,a=e.timestamp;return Object(_.jsxs)("div",{className:"message",children:[Object(_.jsx)(w.a,{src:s.photo}),Object(_.jsxs)("div",{className:"message__info",children:[Object(_.jsxs)("h4",{children:[s.displayName,Object(_.jsx)("span",{className:"message__info__timestamp",children:new Date(null===a||void 0===a?void 0:a.toDate()).toUTCString()})]}),Object(_.jsx)("p",{children:c})]})]})},X=function(){var e=Object(h.c)(B);console.log("user",e);var c=Object(h.c)(p),s=Object(h.c)(O),n=Object(a.useState)(""),t=Object(r.a)(n,2),i=t[0],l=t[1],o=Object(a.useState)([]),j=Object(r.a)(o,2),d=j[0],b=j[1];console.log("messages",d),console.log("channelId",s),Object(a.useEffect)((function(){s&&(console.log("useEffect"),J.collection("channels").doc(s).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){return console.log("snapshot",e),b(e.docs.map((function(e){return e.data()})))})))}),[s]);return Object(_.jsxs)("div",{className:"chat",children:[Object(_.jsx)(Y,{channelName:c}),Object(_.jsx)("div",{className:"chat__messages",children:d.map((function(e){return Object(_.jsx)($,{timestamp:e.timestamp,user:e.user,message:e.message})}))}),Object(_.jsxs)("div",{className:"chat__input",children:[Object(_.jsx)(U.a,{fontSize:"larger"}),Object(_.jsxs)("form",{className:"chat__input__form",children:[Object(_.jsx)("input",{value:i,onChange:function(e){return l(e.target.value)},placeholder:"Message  #".concat(c||"")}),Object(_.jsx)("button",{onClick:function(c){c.preventDefault(),J.collection("channels").doc(s).collection("messages").add({message:i,user:e,timestamp:H.a.firestore.FieldValue.serverTimestamp()}),l("")},className:"chat__inputButton",type:"submit",children:"Send message"})]}),Object(_.jsxs)("div",{className:"chat__inputIcons",children:[Object(_.jsx)(V.a,{fontSize:"larger"}),Object(_.jsx)(W.a,{fontSize:"larger"}),Object(_.jsx)(K.a,{fontSize:"larger"})]})]})]})},Z=s(101),ee=function(){var e=Object(h.b)();return Object(a.useEffect)((function(){F.onAuthStateChanged((function(c){console.log("authUser",c),e(c?z({uid:c.id||"",photo:c.photoURL,email:c.email,displayName:c.displayName}):A())}))}),[e]),Object(_.jsxs)("div",{className:"login",children:[Object(_.jsx)("div",{className:"login__logo",children:Object(_.jsx)("img",{src:"https://1000logos.net/wp-content/uploads/2020/10/Discord-logo.png",alt:"discord_logo"})}),Object(_.jsx)(Z.a,{className:"login__button",onClick:function(){F.signInWithPopup(G).catch((function(e){return console.log("err",e)}))},children:"Sign in"})]})};var ce=function(){var e=Object(h.c)(B);return Object(_.jsx)("div",{className:"app",children:e?Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(P,{}),Object(_.jsx)(X,{})]}):Object(_.jsx)(ee,{})})},se=Object(b.a)({reducer:{user:E,app:x}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s(69);i.a.render(Object(_.jsx)(n.a.StrictMode,{children:Object(_.jsx)(h.a,{store:se,children:Object(_.jsx)(ce,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[70,1,2]]]);
//# sourceMappingURL=main.93bddcc0.chunk.js.map